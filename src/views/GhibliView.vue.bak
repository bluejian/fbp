<template>
  <div class="ghibli-theme">
    <div class="scroll-container">
      <!-- Nostalgic Header -->
      <header class="hero-section reveal">
        <div class="sky-canvas">
          <img src="/images/ghibli-bg.png" alt="Countryside" class="bg-img" />
          <div class="sun-glow"></div>
        </div>
        <div class="hero-content">
          <div class="handdrawn-title">JIAN'S 1ST BIRTHDAY</div>
          <h1 class="main-title">푸른 여름날의 초대</h1>
          <div class="baby-meadow">
             <img src="/images/ghibli-flowers.png" alt="Flowers" class="flower-overlay" />
             <!-- Baby cutout can be added here if needed, but per previous step it was commented out in other views -->
          </div>
        </div>
      </header>

      <!-- Warm Greeting -->
      <section class="message-section reveal">
        <div class="wooden-sign">
          <p class="greeting">{{ message }}</p>
        </div>
      </section>

      <!-- Gallery -->
      <section class="gallery-section reveal">
        <h2 class="section-title">소중한 일상들</h2>
        <div class="gallery-grid">
          <div 
            v-for="(photo, index) in photos" 
            :key="index"
            class="gallery-card"
            @click="openModal(index)"
          >
            <div class="photo-frame" :style="{ backgroundImage: `url(${photo})` }"></div>
            <div class="polaroid-label">{{ index + 1 }}</div>
          </div>
        </div>
      </section>

      <!-- Details -->
      <section class="info-section">
        <div class="info-paper reveal">
          <div class="info-row">
            <span class="dot">●</span>
            <div class="text-group">
              <div class="label">언제 만날까요</div>
              <div class="value">{{ eventDate }}</div>
            </div>
          </div>
          <div class="info-row">
            <span class="dot">●</span>
            <div class="text-group">
              <div class="label">어디서 만날까요</div>
              <div class="value">{{ venueName }}</div>
              <div class="address">{{ venueAddress }}</div>
            </div>
          </div>
          
          <div class="map-group reveal delay-1">
             <div class="map-illustration">루엘 파티플레이스</div>
             <div class="buttons">
               <a :href="kakaoMapUrl" target="_blank" class="ghibli-btn">카카오 길찾기</a>
               <a :href="naverMapUrl" target="_blank" class="ghibli-btn">네이버 길찾기</a>
             </div>
          </div>
        </div>
      </section>

      <footer class="footer reveal">
        <div class="outro-text">작은 씨앗이 나무가 되어가는 첫 해</div>
        <div class="family-name">지요미 지안이네</div>
      </footer>
    </div>

    <!-- Modal -->
    <Teleport to="body">
      <Transition name="fade">
        <div v-if="modalOpen" class="modal-overlay" @click="closeModal">
          <img :src="photos[currentIndex]" class="modal-img" @click.stop />
          <div class="modal-close" @click="closeModal">닫기</div>
        </div>
      </Transition>
    </Teleport>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'

const message = ref(`어느덧 지안이가 태어난 지\n첫 번째 사계절이 지났습니다.\n\n산들바람처럼 기분 좋은 지안이의 날,\n따뜻한 마음으로 함께해주시면 기쁨이 배가 되겠습니다.\n함께 행복한 추억을 만들어주세요.`)
const eventDate = ref('2026년 3월 7일 (토) 오후 6시')
const venueName = ref('루엘 파티플레이스')
const venueAddress = ref('경기도 수원시 영통구 웰빙타운로36번길 46-221')
const photos = ref(['/images/photo1.jpg', '/images/photo2.jpg', '/images/photo3.jpg', '/images/photo4.jpg'])
const kakaoMapUrl = 'https://map.kakao.com/link/to/236178717'
const naverMapUrl = 'https://naver.me/GOPeemGQ'

const modalOpen = ref(false)
const currentIndex = ref(0)
const openModal = (i) => { currentIndex.value = i; modalOpen.value = true }
const closeModal = () => { modalOpen.value = false }

onMounted(() => {
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible') })
  }, { threshold: 0.1 })
  document.querySelectorAll('.reveal').forEach(el => observer.observe(el))
})
</script>

<style scoped>
@import url('https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&family=Nanum+Pen+Script&display=swap');

.ghibli-theme {
  font-family: 'Gowun Batang', serif;
  background-color: #e9f5db;
  color: #3e4c33;
  min-height: 100vh;
  display: flex;
  justify-content: center;
}

.scroll-container {
  width: 100%;
  max-width: 500px;
  background: #fdfdfd;
  box-shadow: 0 0 30px rgba(62, 76, 51, 0.1);
}

.reveal {
  opacity: 0;
  transform: translateY(20px);
  transition: all 1.2s cubic-bezier(0.39, 0.575, 0.565, 1);
}
.visible {
  opacity: 1;
  transform: translateY(0);
}

/* Header */
.hero-section {
  position: relative;
  text-align: center;
  padding-bottom: 60px;
}

.sky-canvas {
  width: 100%;
  height: 450px;
  overflow: hidden;
  position: relative;
}

.bg-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: saturate(1.1);
}

.sun-glow {
  position: absolute;
  top: -50px;
  right: -50px;
  width: 200px;
  height: 200px;
  background: radial-gradient(circle, rgba(255,255,200,0.3) 0%, transparent 70%);
}

.hero-content {
  margin-top: -80px;
  position: relative;
  z-index: 10;
}

.handdrawn-title {
  font-family: 'Nanum Pen Script', cursive;
  font-size: 1.5rem;
  color: #5d7c4b;
  letter-spacing: 2px;
}

.main-title {
  font-size: 2.2rem;
  font-weight: 700;
  margin: 10px 0 30px;
  color: #2c3e50;
}

.baby-meadow {
  width: 100%;
  max-width: 380px;
  margin: 0 auto;
  position: relative;
}

.flower-overlay {
  width: 100%;
  border-radius: 20px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.05);
}

/* Greeting */
.message-section {
  padding: 80px 40px;
  text-align: center;
}

.wooden-sign {
  background-color: #fdfaf3;
  padding: 40px 30px;
  border-radius: 2px;
  border: 1px solid #dcd7c9;
  position: relative;
}

.wooden-sign::before {
  content: '';
  position: absolute;
  top: 10px; left: 10px; right: 10px; bottom: 10px;
  border: 1px solid #eeebe3;
}

.greeting {
  font-size: 1.15rem;
  line-height: 2.4;
  white-space: pre-line;
  color: #4a5d3f;
  position: relative;
  z-index: 1;
}

/* Gallery */
.gallery-section {
  padding: 60px 30px;
}

.section-title {
  font-family: 'Nanum Pen Script', cursive;
  font-size: 2rem;
  text-align: center;
  margin-bottom: 40px;
  color: #5d7c4b;
}

.gallery-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;
}

.gallery-card {
  background: #fff;
  padding: 10px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.05);
  cursor: pointer;
  transition: transform 0.3s;
}

.gallery-card:hover { transform: translateY(-5px); }

.photo-frame {
  aspect-ratio: 1;
  background-size: cover;
  background-position: center;
}

.polaroid-label {
  text-align: right;
  font-family: 'Nanum Pen Script', cursive;
  font-size: 1.2rem;
  margin-top: 10px;
  color: #999;
}

/* Info */
.info-section {
  padding: 80px 30px;
  background: #fdfaf6;
}

.info-paper {
  text-align: left;
}

.info-row {
  display: flex;
  margin-bottom: 40px;
}

.dot { color: #8cb369; margin-right: 15px; font-size: 0.8rem; padding-top: 5px; }

.label {
  font-family: 'Nanum Pen Script', cursive;
  font-size: 1.4rem;
  color: #8cb369;
  margin-bottom: 5px;
}

.value { font-size: 1.2rem; font-weight: 700; color: #2c3e50; }
.address { font-size: 0.95rem; color: #7f8c8d; margin-top: 5px; }

.map-group { margin-top: 50px; }

.map-illustration {
  height: 120px;
  background-color: #fff;
  border: 1px solid #f0e6d2;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #ccc;
  font-size: 0.9rem;
}

.buttons { display: flex; gap: 10px; margin-top: 20px; }

.ghibli-btn {
  flex: 1;
  padding: 15px;
  text-align: center;
  background: #8cb369;
  color: #fff;
  text-decoration: none;
  font-weight: 700;
  border-radius: 4px;
}

/* Footer */
.footer {
  padding: 100px 40px;
  text-align: center;
  color: #a3b18a;
}

.outro-text { font-size: 0.9rem; margin-bottom: 10px; }
.family-name { font-family: 'Nanum Pen Script', cursive; font-size: 1.8rem; }

/* Modal */
.modal-overlay {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100vh;
  background: rgba(255,255,255,0.98);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal-img { max-width: 90%; max-height: 80vh; border: 10px solid #fff; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
.modal-close { margin-top: 40px; cursor: pointer; color: #8cb369; font-weight: 700; }

.fade-enter-active, .fade-leave-active { transition: opacity 0.5s; }
.fade-enter-from, .fade-leave-to { opacity: 0; }
</style>
